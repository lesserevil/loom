id: bd-run-failure-20260120005728
type: task
title: "P0 - run failed"
description: |
  Command: docker compose up --build
  Exit code: 1

  Output:
    time="2026-01-19T16:57:23-08:00" level=warning msg="/Users/jkh/Src/agenticorp/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
     Image agenticorp:latest Building 
     Image agenticorp-agenticorp-test Building 
    #1 [internal] load local bake definitions
    #1 reading from stdin 959B done
    #1 DONE 0.0s
    
    #2 [agenticorp-test internal] load build definition from Dockerfile
    #2 transferring dockerfile: 1.12kB done
    #2 DONE 0.0s
    
    #3 [agenticorp-test internal] load metadata for docker.io/library/golang:1.24-alpine
    #3 DONE 0.3s
    
    #4 [agenticorp internal] load metadata for docker.io/library/alpine:latest
    #4 DONE 0.3s
    
    #5 [agenticorp-test internal] load .dockerignore
    #5 transferring context: 353B done
    #5 DONE 0.0s
    
    #6 [agenticorp-test builder 1/8] FROM docker.io/library/golang:1.24-alpine@sha256:598dbb5f4658bd66f3ad7bfda86a9af580812b57065d8854add882e64480d986
    #6 resolve docker.io/library/golang:1.24-alpine@sha256:598dbb5f4658bd66f3ad7bfda86a9af580812b57065d8854add882e64480d986 0.0s done
    #6 DONE 0.0s
    
    #7 [agenticorp stage-1 1/7] FROM docker.io/library/alpine:latest@sha256:865b95f46d98cf867a156fe4a135ad3fe50d2056aa3f25ed31662dff6da4eb62
    #7 resolve docker.io/library/alpine:latest@sha256:865b95f46d98cf867a156fe4a135ad3fe50d2056aa3f25ed31662dff6da4eb62 0.0s done
    #7 DONE 0.0s
    
    #8 [agenticorp-test internal] load build context
    #8 transferring context: 12.22kB done
    #8 DONE 0.0s
    
    #9 [agenticorp stage-1 4/7] WORKDIR /app
    #9 CACHED
    
    #10 [agenticorp stage-1 5/7] COPY --from=builder /build/agenticorp /app/agenticorp
    #10 CACHED
    
    #11 [agenticorp stage-1 2/7] RUN apk add --no-cache ca-certificates tzdata
    #11 CACHED
    
    #12 [agenticorp stage-1 6/7] COPY --from=builder /build/config.yaml /app/config.yaml
    #12 CACHED
    
    #13 [agenticorp stage-1 3/7] RUN addgroup -g 1000 agenticorp &&     adduser -D -u 1000 -G agenticorp agenticorp
    #13 CACHED
    
    #14 [agenticorp-test builder 7/8] COPY . .
    #14 CACHED
    
    #15 [agenticorp-test builder 3/8] WORKDIR /build
    #15 CACHED
    
    #16 [agenticorp-test builder 5/8] COPY go.sum ./
    #16 CACHED
    
    #17 [agenticorp-test builder 2/8] RUN apk add --no-cache git ca-certificates tzdata gcc musl-dev
    #17 CACHED
    
    #18 [agenticorp-test builder 6/8] RUN go mod download
    #18 CACHED
    
    #19 [agenticorp-test builder 4/8] COPY go.mod ./
    #19 CACHED
    
    #20 [agenticorp stage-1 7/7] RUN chown -R agenticorp:agenticorp /app
    #20 CACHED
    
    #21 [agenticorp-test builder 8/8] RUN CGO_ENABLED=1 GOOS=linux go build     -ldflags="-w -s"     -o agenticorp     ./cmd/agenticorp
    #21 CACHED
    
    #22 [agenticorp] exporting to image
    #22 exporting layers done
    #22 exporting manifest sha256:8cd4c974c5c4966071408c66e69fecc3bf372b4eddab7a9ad75ad199f840c4d8 done
    #22 exporting config sha256:9f593e41aad2b651f80b79a70b41cd15d2fed5e703bf06572e10f63204b4377f done
    #22 exporting attestation manifest sha256:4da4c6292f0e137ddcb00a090b088653b71955811c940389f4d44443c7f23ab7 0.0s done
    #22 exporting manifest list sha256:fb238bf386e7442f671d019cc9081c62ca941bf4b980d0b57f7fe0fc3e9e1406 done
    #22 naming to docker.io/library/agenticorp:latest done
    #22 unpacking to docker.io/library/agenticorp:latest done
    #22 DONE 0.1s
    
    #23 [agenticorp-test] exporting to image
    #23 exporting layers done
    #23 exporting manifest sha256:4460e8224685a77fdb59d5161a77146610fd60d81fe569f5756fadbac99b3bd2 done
    #23 exporting config sha256:40bc202acdafaf14d18ba9afe9d64dc62f9ac807d839093850a2c761bbe1c17d done
    #23 exporting attestation manifest sha256:c715d1ab920c436d43b3c7f46f67ee663e727495e92364fc260d268ba9000975 0.0s done
    #23 exporting manifest list sha256:e945e4543ed567a86289c979e6f2e1723eb5c11da3d0c5e47d14c1ed8630f6d7 0.0s done
    #23 naming to docker.io/library/agenticorp-agenticorp-test:latest done
    #23 unpacking to docker.io/library/agenticorp-agenticorp-test:latest done
    #23 DONE 0.1s
    
    #24 [agenticorp] resolving provenance for metadata file
    #24 DONE 0.0s
    
    #25 [agenticorp-test] resolving provenance for metadata file
    #25 DONE 0.0s
     Image agenticorp-agenticorp-test Built 
     Image agenticorp:latest Built 
     Network agenticorp_agenticorp-network Creating 
     Network agenticorp_agenticorp-network Created 
     Container temporal-postgresql Creating 
     Container temporal-postgresql Created 
     Container temporal Creating 
     Container temporal Created 
     Container temporal-ui Creating 
     Container agenticorp Creating 
     Container agenticorp-test Creating 
     Container agenticorp Created 
     Container agenticorp-test Created 
     Container temporal-ui Created 
    Attaching to agenticorp, agenticorp-test, temporal, temporal-postgresql, temporal-ui
     Container temporal-postgresql Starting 
     Container temporal-postgresql Started 
     Container temporal-postgresql Waiting 
    temporal-postgresql  | 
    temporal-postgresql  | PostgreSQL Database directory appears to contain a database; Skipping initialization
    temporal-postgresql  | 
    temporal-postgresql  | 2026-01-20 00:57:24.267 UTC [1] LOG:  starting PostgreSQL 15.15 on aarch64-unknown-linux-musl, compiled by gcc (Alpine 15.2.0) 15.2.0, 64-bit
    temporal-postgresql  | 2026-01-20 00:57:24.267 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
    temporal-postgresql  | 2026-01-20 00:57:24.267 UTC [1] LOG:  listening on IPv6 address "::", port 5432
    temporal-postgresql  | 2026-01-20 00:57:24.268 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
    temporal-postgresql  | 2026-01-20 00:57:24.270 UTC [29] LOG:  database system was shut down at 2026-01-20 00:56:33 UTC
    temporal-postgresql  | 2026-01-20 00:57:24.273 UTC [1] LOG:  database system is ready to accept connections
    temporal-postgresql  | 2026-01-20 00:57:28.058 UTC [1] LOG:  received fast shutdown request
    temporal-postgresql  | 2026-01-20 00:57:28.061 UTC [1] LOG:  aborting any active transactions
    temporal-postgresql  | 2026-01-20 00:57:28.062 UTC [1] LOG:  background worker "logical replication launcher" (PID 32) exited with exit code 1
    temporal-postgresql  | 2026-01-20 00:57:28.062 UTC [27] LOG:  shutting down
    temporal-postgresql  | 2026-01-20 00:57:28.063 UTC [27] LOG:  checkpoint starting: shutdown immediate
    temporal-postgresql  | 2026-01-20 00:57:28.067 UTC [27] LOG:  checkpoint complete: wrote 3 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.002 s, sync=0.001 s, total=0.006 s; sync files=2, longest=0.001 s, average=0.001 s; distance=0 kB, estimate=0 kB
    temporal-postgresql  | 2026-01-20 00:57:28.069 UTC [1] LOG:  database system is shut down
    [Ktemporal-postgresql exited with code 0
     Container temporal-postgresql Error dependency temporal-postgresql failed to start
    dependency failed to start: Error response from daemon: No such container: 0f733440610dd99bc28fea7019df0496cf40eb0d2677bc20edeaf034717b39a0

status: closed
priority: 0
project_id: agenticorp
assigned_to: null
blocked_by: []
blocks: []
parent: null
children: []
tags:
  - p0
  - failure
  - run
created_at: 2026-01-20T00:57:28Z
updated_at: 2026-01-20T00:57:28Z
closed_at: 2026-01-20T16:52:43Z
context:
  source: makefile
  target: run
